# MVP 范围与功能清单（家庭设备→桌面端家庭库，局域网单向同步）

目标与边界
- 家庭成员设备将照片/视频在局域网内同步到桌面端家庭库；本地优先；不做公网/云。
- 不实现专业编辑与高级 AI；仅保留后续占位。
- 技术栈：Flutter Desktop/Mobile；状态管理 GetX；不使用 station/backend；注释统一英文；不使用相对路径。

模块与里程碑映射（M1–M8）
- M1 技术架构与环境初始化：项目骨架、依赖、跨平台运行、基础配置。
- M2 桌面库初始化与配对向导：选择库根路径、设备ID与令牌、扫码/发现配对。
- M3 局域网同步与传输：分块上传、断点续传、同步队列、失败重试、带宽/并发控制。
- M4 导入、去重与索引：EXIF/IPTC/XMP 解析、文件哈希去重、预览生成队列（WebP/AVIF）、本地索引库。
- M5 浏览与检索：时间线/相册/设备视图、筛选与搜索、分页性能优化。
- M6 共享相册与导出/回收站：成员共享（局域网访问控制）、导出模板、误删恢复。
- M7 备份与恢复：增量备份（索引+配置+预览）、恢复一致性校验。
- M8 隐私与安全：应用锁、敏感相册隐藏、令牌轮换与局域网访问控制。

验收标准（跨模块）
- 配对完成时间 ≤ 30 秒；局域网传输断点续传成功率 ≥ 99%。
- 去重：文件级哈希检出率 ≈ 100%，误报 ≈ 0；索引吞吐 ≥ 3000 媒体/小时（视硬件可调）。
- 浏览性能：分页加载时间 ≤ 200 ms（100 缩略图/页）；滚动掉帧 < 5%。
- 备份/恢复：恢复后索引与文件一致性校验 100% 通过。
- 隐私：令牌每 30 天可轮换；敏感相册默认隐藏；访问审计日志可用。

非功能性要求
- 稳定性：大库（5–10 万）下同步/索引/浏览稳定；错误可重试，日志可诊断。
- 可观测：同步/索引/预览队列均有任务日志、错误码。
- 安全：不持久化明文密钥；局域网服务仅本地网段可访问。
- 多用户与权限：库根按用户隔离子目录（/LibraryRoot/{user_id}/），管理员仅可见用户与计数不可见内容；支持相册级加密存储（数据密钥）。

参考与协同
- 产品设计：doc/product-design-desktop.gdp.zh.md / doc/product-design-desktop.zh.md
- 实现目录：station/desktop（桌面）、mobile（移动）、protos（协议）

推进建议
- 先执行 M1→M2→M3→M4，形成“导入+同步+索引+预览”闭环；再进入 M5–M8 体验与合规。