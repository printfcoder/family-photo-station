# Home 主页（手机端）

以系统相册的使用习惯为蓝本，保持用户熟悉的操作方式；在主页集中提供同步与选择性同步的入口与状态反馈，确保“看得见的备份、可控的同步”。

页面概述
- 展示最近同步状态、上传入口、快捷入口（时间线/相册/搜索/设置），以及必要的权限/网络提示。

里程碑与协同
- M3（同步）/M5（浏览与搜索）；与移动端产品设计 v1 的第1、2阶段对齐。

路由与模块路径
- 路由：/home
- 模块路径：mobile/lib/home
- 状态管理：GetX（HomeController + HomeState）

角色与权限
- 普通用户；未登录跳转注册/登录流程。

功能列表
- 最近同步卡片：显示上传进度（已完成/进行中/失败）、队列大小与剩余估算、最近一次备份时间、暂停/继续上传、选择性同步开关（按相册/文件夹）、WiFi-only 提示与切换、失败项重试入口。
- 上传入口（选择器）：支持单选/多选，过滤已备份项（去重提示），按相册筛选选择，估算上传大小与时间，加入队列后返回主页显示进度。
- 快捷入口：时间线、相册、搜索、设置。
- 权限引导卡片：相册访问权限未授权时显示授权引导；后台上传权限/电池优化指引。

UI结构与元素位置
- Header：账户信息/设备昵称/设置入口。
- Cards：同步状态卡片、权限引导卡片。
- Actions：上传按钮与快捷入口。
- List：最近活动简要（最近上传的若干缩略图）。

交互与流程
- 点击上传 → 进入选择器 → 去重校验 → 加入队列 → 返回主页显示进度。
- 点击同步卡片 → 跳转到“同步详情”页。
- 切换选择性同步开关 → 立即更新策略并提示效果。
- 暂停/继续 → 反馈当前状态（toast/状态文案）。
- 首次打开若未授权 → 触发权限请求流程（相册权限/后台上传权限）。

状态与空态
- 无同步：显示引导卡片“开启自动上传”。
- 无权限：显示权限引导与授予按钮。
- 离线：显示离线提示与队列等待状态。
- 低电量/省电模式：显示策略提示（延迟上传）。
- 初次使用：展示“开始备份”主按钮与简要说明。

错误与提示
- 状态加载失败：重试按钮与错误文案。
- 上传失败：失败计数与重试入口，提供失败原因摘要。
- Token 过期：提示重新登录或刷新令牌。
- 存储不足：提示清理或更换目标存储。

指标与验收
- 主页首屏加载≤500ms（不含网络）。
- 同步进度显示准确率≥99%。
- 上传入口点击→成功入队转化率≥95%。
- 权限引导完成率≥80%。

关联文档与代码
- M3（同步）、M5（浏览与搜索）。
- doc/product-design-mobile-v1.zh.md 第1/2阶段。
- 模块代码：mobile/lib/home/home_screen.dart；路由：mobile/lib/routes/app_routes.dart。